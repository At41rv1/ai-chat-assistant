<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>At41rv AI Assistant</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

    <!-- This main container holds the entire app logic -->
    <div id="app-root">

        <!-- Login Screen (Initially Hidden) -->
        <div id="loginScreen" class="view hidden">
            <div class="login-card">
                <h1 id="loginTitle">Welcome Back</h1>
                <p>Sign in or create an account to continue.</p>
                <div class="form-group">
                    <label for="usernameInput">Username</label>
                    <input type="text" id="usernameInput" placeholder="Enter a username">
                </div>
                <div class="form-group">
                    <label for="passwordInput">Password</label>
                    <input type="password" id="passwordInput" placeholder="Enter a password">
                </div>
                <div class="form-group" id="confirmPasswordWrapper">
                    <label for="confirmPasswordInput">Confirm Password</label>
                    <input type="password" id="confirmPasswordInput" placeholder="Confirm your password">
                </div>
                <p id="authError" class="error-message hidden"></p>
                <button id="authButton" class="auth-button">Log In</button>
                <p id="authToggle" class="auth-toggle">Don't have an account? <a href="#">Sign Up</a></p>
                <div class="divider">OR</div>
                <div id="g_id_onload" data-client_id="465923208288-hb4182d5ro58k30pkshh4knu3i62bvrh.apps.googleusercontent.com" data-context="signin" data-ux_mode="popup" data-callback="handleGoogleResponse" data-auto_prompt="false"></div>
                <div class="g_id_signin" data-type="standard" data-shape="rectangular" data-theme="filled_blue" data-text="signin_with" data-size="large" data-logo_alignment="left"></div>
            </div>
        </div>

        <!-- Main Chat Interface -->
        <div id="chatInterface" class="view hidden">
            <aside id="sidebar">
                <div class="sidebar-header"><h1 class="logo">At41rv</h1></div>
                <div class="sidebar-content"><button id="newChatButton" class="sidebar-button">New Chat</button></div>
                <div class="sidebar-footer">
                    <div id="userInfo" class="user-info">
                        <div id="userAvatar" class="avatar"></div>
                        <span id="userName"></span>
                    </div>
                    <div id="userMenu">
                         <button id="adminNavButton" class="menu-button hidden" title="Admin Panel">A</button>
                        <button id="logoutButton" class="menu-button" title="Logout">L</button>
                    </div>
                </div>
            </aside>
            <main id="chatArea">
                <div class="chat-header">
                    <button id="sidebarToggle" class="sidebar-toggle">Menu</button>
                    <select id="modelSelector">
                        <option value="llama-3.1-8b-instant">âš¡ At41rv Fast</option>
                        <option value="deepseek-r1-distill-llama-70b">ðŸ§  At41rv Thinking</option>
                    </select>
                </div>
                <div id="chatMessages" class="chat-messages"></div>
                <div class="chat-input-area">
                    <div class="chat-input-wrapper">
                        <textarea id="messageInput" placeholder="Type your message..." rows="1"></textarea>
                        <button id="sendButton" title="Send Message" class="send-button"></button>
                    </div>
                </div>
            </main>
        </div>

        <!-- Admin Dashboard -->
        <div id="adminPanel" class="view hidden">
            <div class="admin-header">
                <h1>Admin Dashboard</h1>
                <button id="closeAdminPanel" class="close-button">Back to Chat</button>
            </div>
            <div class="admin-content">
                <div class="admin-stats">
                    <div class="stat-card"><h3>Total Users</h3><p id="totalUsersStat">0</p></div>
                    <div class="stat-card"><h3>Total Messages</h3><p id="totalMessagesStat">0</p></div>
                    <div class="stat-card"><h3>Google Users</h3><p id="googleUsersStat">0</p></div>
                    <div class="stat-card"><h3>Username Users</h3><p id="usernameUsersStat">0</p></div>
                </div>
                <div class="admin-main-area">
                    <div class="user-list-wrapper">
                        <h2>All Users</h2>
                        <input type="text" id="userSearchInput" placeholder="Search users...">
                        <div class="table-wrapper">
                            <table id="userTable">
                                <thead><tr><th>User</th><th>Type</th><th>Joined</th></tr></thead>
                                <tbody id="userTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="chat-history-wrapper">
                        <h2>Conversation History</h2>
                        <div id="adminChatView" class="admin-chat-view">
                            <p class="placeholder">Select a user to view their chat history.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
